<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>My Cyprus Walk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.jsdelivr.net/npm/aframe@1.7.0/dist/aframe.min.js"></script>

  <style>
    /* –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∑–≤—É–∫–∞ */
    #start-audio {
      position: fixed; inset: auto 20px 20px auto;
      padding: 10px 14px; border-radius: 10px; border: 0;
      background: #111; color: #fff; font: 600 14px/1.2 system-ui;
      box-shadow: 0 4px 16px rgba(0,0,0,.2); cursor: pointer; z-index: 10;
    }
    #start-audio.hidden { display: none; }
  </style>
</head>
<body>
<a-scene loading-screen="dotsColor:#fff">

  <!-- –ó–∞–≥—Ä—É–∂–∞–µ–º –∞—Å—Å–µ—Ç—ã (—Ç–≤–æ—ë –Ω–µ–±–æ + –º–æ–¥–µ–ª—å —É–ª–∏—Ü—ã) -->
  <a-assets>
    <!-- –ü–æ–ª–æ–∂–∏ —Å–≤–æ–π —Ñ–∞–π–ª —Å—é–¥–∞: assets/images/sky.jpg -->
    <img id="skyTex" src="assets/images/sky.jpg" crossorigin="anonymous">

    <a-asset-item id="street"
      src="assets/models/Limasol_Street%20(2).glb"></a-asset-item>
  </a-assets>

  <!-- –ù–µ–±–æ: —Ç–≤–æ—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è -->
  <a-sky src="#skyTex" rotation="0 -90 0"></a-sky>

  <!-- –°–≤–µ—Ç (—á—Ç–æ–±—ã –º–æ–¥–µ–ª—å –Ω–µ –±—ã–ª–∞ —Ç—ë–º–Ω–æ–π) -->
  <a-entity light="type: ambient; intensity: 0.35"></a-entity>
  <a-entity light="type: directional; intensity: 0.6" position="2 4 2"></a-entity>

  <!-- –ö–∞–º–µ—Ä–∞ (—Ä–æ—Å—Ç 1.6 –º, —Ö–æ–¥—å–±–∞ WASD / —Å–≤–∞–π–ø) -->
  <a-entity camera look-controls wasd-controls position="0 1.6 5"></a-entity>

  <!-- –ú–æ–¥–µ–ª—å —É–ª–∏—Ü—ã -->
  <a-entity gltf-model="#street" position="0 0 0"></a-entity>
</a-scene>

<!-- –§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞ -->
<audio id="amb"
       src="assets/audio/Analog_Mannequin%20Milk%20Cassette%20X.mp3%20-%20Demo.mp3"
       preload="auto" loop></audio>

<!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∑–≤—É–∫–∞ -->
<button id="start-audio">üîä –í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫</button>

<script>
  // –ü–µ—Ä–≤—ã–π –∂–µ—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî –∑–∞–ø—É—Å–∫–∞–µ–º –º—É–∑—ã–∫—É –∏ –ø—Ä—è—á–µ–º –∫–Ω–æ–ø–∫—É
  const btn = document.getElementById('start-audio');
  const amb = document.getElementById('amb');

  function startAudio() {
    amb.play().then(() => btn.classList.add('hidden'))
               .catch(err => console.log('Audio blocked:', err));
    window.removeEventListener('click', startAudio);
    window.removeEventListener('touchstart', startAudio);
  }
  btn.addEventListener('click', startAudio);
  window.addEventListener('click', startAudio);
  window.addEventListener('touchstart', startAudio);
</script>
</body>
</html>
